<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #121212; color: #fff; }
        form { max-width: 600px; margin: 20px auto; padding: 20px; background: #1f1f1f; border-radius: 8px; }
        .product-list { margin: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dashboard Admin</h1>
        <a href="index.html" class="btn btn-secondary">Voltar para Home</a>
        <form id="product-form">
            <h2>Criar Produto</h2>
            <input type="text" class="form-control mb-3" id="name" placeholder="Nome do Produto" required>
            <textarea class="form-control mb-3" id="description" placeholder="Descrição" required></textarea>
            <input type="number" class="form-control mb-3" id="price" placeholder="Preço em R$" step="0.01" required>
            <input type="url" class="form-control mb-3" id="downloadLink" placeholder="Link de Download (ex: Google Drive)" required>
            <button type="submit" class="btn btn-primary">Adicionar Produto</button>
        </form>
        <h2>Produtos Existentes</h2>
        <div id="product-list" class="product-list"></div>
    </div>
    <script>
        if (!localStorage.getItem('adminLogged')) {
            window.location.href = 'login.html';
        }

        let products = JSON.parse(localStorage.getItem('products')) || [];

        function renderAdminProducts() {
            let html = '';
            products.forEach((p, i) => {
                html += `<div class="card mb-3 bg-dark text-white">
                    <div class="card-body">
                        <h5>${p.name}</h5>
                        <p>${p.description} - R$${p.price}</p>
                        <p>Link: <a href="${p.downloadLink}" target="_blank">Download</a></p>
                        <button class="btn btn-danger" onclick="deleteProduct(${i})">Deletar</button>
                    </div>
                </div>`;
            });
            document.getElementById('product-list').innerHTML = html;
        }

        document.getElementById('product-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const product = {
                name: document.getElementById('name').value,
                description: document.getElementById('description').value,
                price: document.getElementById('price').value,
                downloadLink: document.getElementById('downloadLink').value
            };
            products.push(product);
            localStorage.setItem('products', JSON.stringify(products));
            renderAdminProducts();
            e.target.reset();
        });

        function deleteProduct(index) {
            products.splice(index, 1);
            localStorage.setItem('products', JSON.stringify(products));
            renderAdminProducts();
        }

        renderAdminProducts();
    </script>
</body>
</html>
